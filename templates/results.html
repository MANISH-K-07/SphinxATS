<!DOCTYPE html>
<html>
<head>
    <title>Ranking Results</title>
    <style>
        body { font-family: Arial; background: #f4f6f9; padding: 40px; }
        .container { max-width: 1200px; margin: auto; background: white; padding: 30px; border-radius: 8px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; border-bottom: 1px solid #ddd; text-align: left; }
        th { background: #2c3e50; color: white; }
        tr:hover { background: #f2f2f2; }

        .rank-badge {
            font-weight: bold;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
        }

        .rank-1 { background: #27ae60; }
        .rank-2 { background: #2980b9; }
        .rank-3 { background: #8e44ad; }

        .progress-container {
            background: #e0e0e0;
            border-radius: 20px;
            overflow: hidden;
            height: 18px;
            width: 150px;
        }

        .progress-bar {
            height: 100%;
            text-align: center;
            color: white;
            font-size: 12px;
            line-height: 18px;
        }

        .green { background: #27ae60; }
        .yellow { background: #f39c12; }
        .red { background: #c0392b; }

        .back {
            margin-top: 20px;
            display: inline-block;
            text-decoration: none;
            background: #2c3e50;
            color: white;
            padding: 8px 15px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Resume Ranking Results</h2>

        <table>
            <tr>
                <th>Rank</th>
                <th>Resume</th>
                <th>Final Score</th>
                <th>Skill Match</th>
                <th>Experience Score</th>
                <th>Matched Skills</th>
            </tr>

            {% for resume in ranked %}
            <tr>
                <td>
                    <span class="rank-badge rank-{{ loop.index if loop.index <= 3 else '' }}">
                        #{{ loop.index }}
                    </span>
                </td>

                <td>{{ resume.name }}</td>

                <td>{{ resume.final_score }}</td>

                <td>
                    <div class="progress-container">
                        <div class="progress-bar
                            {% if resume.skill_percent >= 75 %}
                                green
                            {% elif resume.skill_percent >= 50 %}
                                yellow
                            {% else %}
                                red
                            {% endif %}
                        "
                        style="width: {{ resume.skill_percent }}%;">
                            {{ resume.skill_percent }}%
                        </div>
                    </div>
                </td>

                <td>{{ resume.exp_score }}</td>

                <td>{{ resume.matched_skills | join(", ") }}</td>
            </tr>
            {% endfor %}
        </table>

        <a class="back" href="/hr">Back to HR Dashboard</a>
    </div>
</body>
</html>
